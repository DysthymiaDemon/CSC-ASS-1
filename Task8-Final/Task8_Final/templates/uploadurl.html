
<head>
    <link rel="stylesheet" type="text/css" href="/static/content/form.css" />
</head>
<div class="form-group" autocomplete="off" role="main">
    <h2 class="a11y-hidden">Clarifai API Upload and Get tags (URL)</h2>

    <div>
        <label class="label">
            <input type="text" class="text" name="text" placeholder="URL" id="inputurl" required />
        </label>
    </div>
    <input type="button" onclick="submit()" value="Upload" />
    <h3>Tags</h3>
    <div>
        <textarea id="output" readonly></textarea>
    </div>
    <div>
        <p class="text-justify" id="outcomeTag"></p>
    </div>
    <div>
        <p class="text-justify" id="outcomeUpload"></p>
    </div>
</div>

<div>
    <img id="preview" />
</div>



<script src="/static/scripts/jquery-1.10.2.js"></script>
<script>
    function submit() {
        var urlinput = document.getElementById("inputurl")
        var output = document.getElementById("output")
        var outcomeTag = document.getElementById("outcomeTag")
        var outcomeUpload = document.getElementById("outcomeUpload")

        output.innerHTML = ""
        outcomeUpload.innerHTML = ""
        outcomeTag.innerHTML = ""
        var input = {
            url: urlinput.value
        }
        try {
            $.ajax({
                data: input,
                type: 'POST',
                url: `${window.origin}/uploadurl/processTags`
            }).done(function (data) {
                if (data.error) {
                    outcomeTag.append(data.error)
                }
                else {
                    console.log(data)
                    output.append(data)
                    outcomeTag.append("Successfully shown tags")
                    $.ajax({
                        data: input,
                        type: 'POST',
                        url: `${window.origin}/processUploadURL`
                    }).done(function (data) {
                        if (data.error) {
                            outcomeUpload.append(data.error)
                        }
                        else {
                            outcomeUpload.append(data)
                        }
                    })
                }
            })
        } catch (Exception) {
            outcome.append("Error")
        }
    }
</script>