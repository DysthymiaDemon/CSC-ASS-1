
<head>
    <link rel="stylesheet" type="text/css" href="/static/content/form.css" />
</head>
<div id="uploadform1" action="/" class="form-group" autocomplete="off" role="main">
    <h2 class="a11y-hidden">Clarifai API Upload and Get tags (Bytes)</h2>

    <div>
        <label for="img">Select image:</label>
        <input type="file" id="img" name="img" accept="image/*" required>
    </div>
    <input type="button" onclick="submit()" value="Upload" />
    <textarea id="output">
    </textarea>
</div>

<div>
    <img id="preview" />
</div>

<script src="/static/scripts/jquery-1.10.2.js"></script>
<script>

    function getBase64(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = error => reject(error);
        });
    }

    function submit() {

        getBase64(document.getElementById("img").files[0]).then(function (data) {
            var input = {
                file: data
            }

            console.log(input['file'])

            $.ajax({
                data: input,
                type: 'POST',
                url: `${window.origin}/uploadbytes/processTags`
            }).done(function (data) {
                if (data.error) {

                }

            })

        })
    }
</script>